<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>广财启动页</title>
    <link rel="icon" href="contents/image/icon.png">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" href="css/material/nav.css">
    <script src="javascript/javascript.js"></script>

    <!-- 动画 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- #region - Markdown -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>


/* Markdown 样式 */
.markdown-body {
    font-family: 'zhengwen';
    box-sizing: border-box;
    min-width: 200px;
    max-width: 980px;
    margin: 0 auto;
    padding: 45px;
    border: 1px solid #ddd;
    border-radius: 8px;
    background-color: #f9f9f9;
    margin-bottom: 40px;
}

/* 图片样式 */
.markdown-body img {
    display: block;
    margin: 0 auto;
    max-width: 100%;
    height: auto;
}

/* 图片大小类 */
.markdown-body img.small {
    max-width: 50%;
}

.markdown-body img.medium {
    max-width: 75%;
}

.markdown-body img.large {
    max-width: 100%;
}

/* 点击效果 */
.markdown-body img.clickable-img {
    cursor: pointer;
}

/* 响应式调整 */
@media (max-width: 600px) {

    div.markdown-body {
        padding: 5px; /* 在屏幕宽度较小时调整 padding */
    }

    .markdown-body img.small {
        max-width: 60%; /* 在手机上稍微增大 */
    }

    .markdown-body img.medium {
        max-width: 85%; /* 在手机上稍微增大 */
    }

    .markdown-body img.large {
        max-width: 100%; /* 保持全宽 */
    }
}




    </style>
    <!-- #endregion -->

    <!-- #region - 图片预览库lightGallery -->
    <!-- 引入 lightGallery CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/css/lightgallery.min.css">

    <!-- 引入 lightGallery JS -->
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@2.7.1/lightgallery.umd.min.js"></script>
    <!-- #endregion -->
</head>

<body>
    <div class="container">
        <div>
            <div class="header">
                <a href="https://www.gdufe.edu.cn/main.htm" target="_blank" class="header-link">
                    <img src="contents/image/icon.png" alt="Logo" class="logo">
                    <h1 class="site-title">广财启动页</h1>
                </a>
            </div>
            <div class="search-container">
                <div class="search-box-wrapper">
                    <img src="https://img.icons8.com/?size=80&id=AHbX8dLfDH35&format=png" alt="Bing" class="search-icon"
                        style="width: 40px;height: 40px;">
                    <input type="text" placeholder="搜索必应" class="search-box" id="bing-search">
                    <button class="search-button" onclick="searchBing()">
                        <img src="https://img.icons8.com/?size=50&id=132&format=png" alt="Search">
                    </button>
                </div>
                <div class="search-box-wrapper">
                    <img src="https://img2.baidu.com/it/u=517720811,1019577022&fm=253&app=138&size=w931&n=0&f=PNG&fmt=auto?sec=1723741200&t=202819d77a89d767d0ad0b9b316b6c0a"
                        alt="Baidu" class="search-icon">
                    <input type="text" placeholder="搜索百度" class="search-box" id="baidu-search">
                    <button class="search-button" onclick="searchBaidu()">
                        <img src="https://img.icons8.com/?size=50&id=132&format=png" alt="Search">
                    </button>
                </div>
            </div>

            <ul id="nav">
                <li class="slide1"></li>
                <li class="slide2"></li>
                <li><a href="#" class="tab-link active" onclick="openTab(event, '常用')">常用</a></li>
                <li><a href="#" class="tab-link" onclick="openTab(event, '校园地图')">校园地图</a></li>
                <li><a href="#" class="tab-link" onclick="openTab(event, '公告')">公告</a></li>
                <li><a href="#" class="tab-link" onclick="openTab(event, '新生')">新生</a></li>
                <li><a href="#" class="tab-link" onclick="openTab(event, '建议')">建议/联系</a></li>
            </ul>

        </div>
        <div class="tab-container">
            <div class="tab-content" id="常用">
                <!-- 推荐内容 -->
                <iframe src="subpages/resourcePage/links.html" frameborder="0"
                    style="width: 100%; height: 800px; overflow: hidden;" scrolling="no" title="链接页面"></iframe>
            </div>

            <div class="tab-content" id="校园地图" style="display: none;">
                <p style="text-align: center;">/***鼠标左键点击放大，摁住右键可拖拽，再次左键点击还原***/</p>
            
                <!-- 默认内容 -->
                <div id="map-wrapper" class="map-wrapper">
                    <div class="map-container">
                        <h1>佛山校区地图</h1>
                        <img data-src="contents/image/sanshui.png" alt="Map" class="map-image lazyload">
                    </div>
                    <div class="map-container">
                        <h1>广州校区地图</h1>
                        <img data-src="contents/image/guangzhou.jpg" alt="Mapguangzhou" class="map-image lazyload">
                    </div>
                </div>
            
                <!-- 触摸端内容 -->
                <div id="container-map" class="container-map">
                    <div class="map-cell">
                        <div class="map-title">佛山校区</div>
                        <img data-src="contents/image/sanshui.jpg" class="clickable-img lazyload" alt="佛山校区地图">
                    </div>
                    <div class="map-cell">
                        <div class="map-title">广州校区</div>
                        <img data-src="contents/image/guangzhou.jpg" class="clickable-img lazyload" alt="广州校区地图">
                    </div>
                </div>
            
                <script>
                    function isTouchDevice() {
                        return 'ontouchstart' in window || navigator.maxTouchPoints > 0;
                    }
            
                    document.addEventListener('DOMContentLoaded', () => {
                        if (isTouchDevice()) {
                            document.getElementById('map-wrapper').style.display = 'none';
                            document.getElementById('container-map').style.display = 'flex'; /* 使用 flex 显示容器 */
                        } else {
                            document.getElementById('map-wrapper').style.display = 'flex'; /* 使用 flex 显示容器 */
                            document.getElementById('container-map').style.display = 'none';
                        }
            
                        // Lazyload implementation
                        const lazyImages = document.querySelectorAll('.lazyload');
            
                        const imageObserver = new IntersectionObserver((entries, observer) => {
                            entries.forEach(entry => {
                                if (entry.isIntersecting) {
                                    const img = entry.target;
                                    img.src = img.getAttribute('data-src');
                                    img.removeAttribute('data-src');
                                    img.classList.remove('lazyload');
                                    observer.unobserve(img);
                                }
                            });
                        });
            
                        lazyImages.forEach(image => {
                            imageObserver.observe(image);
                        });
                    });
                </script>
            
                <h3 style="text-align: center; margin-top: 30px;">图片取自公众号：<strong>小财e课表</strong>
                    并修改，侵权请联系Makiiiiiiiho@gmail.com删除</h3>
            </div>

            <div class="tab-content" id="公告" style="display: none;">
                <iframe src="README.md"></iframe>
            </div>

            <div class="tab-content" id="新生" style="display: none;">
                <div style="font-family: 'zhengwen';">
                    <div class="collapsible-section">
                        <h3 class="collapsible-header">常用要关注的公众号</h3>
                        <div class="collapsible-content" style="display: none;"> <!-- 默认隐藏内容 -->
                            <iframe src="subpages/Article/gzh.md"></iframe>
                        </div>
                    </div>

                    <div class="collapsible-section">
                        <h3 class="collapsible-header">小程序</h3>
                        <div class="collapsible-content" style="display: none;">
                            <p><strong>趣智校园</strong>：洗澡用</p>
                            <p><strong>财大e卡</strong>：<u>广财人的电子身份证</u>，出入校园、充值校园卡、热水费电费等</p>
                            <p><strong>小速校园</strong>：看课表看成绩很方便</p>
                            <p><strong>车来了精准实时公交</strong>：踩点出门神器</p>
                            <p><strong>广佛通X佛山乘车码</strong>：坐公交扫码用</p>
                            <p><strong>端州区楷婕小食店 | 小食店</strong>：第三饭堂沙县小吃小程序，可预订且95折</p>
                            <p><strong>红昇超市 | 南沙</strong>：二饭小卖部外卖</p>
                            <p><strong>趣选书</strong>：每学期选课后，可登录购买课程用书</p>
                        </div>
                    </div>

                    <div class="collapsible-section">
                        <h3 class="collapsible-header">✨✨第二课堂是什么？</h3>
                        <div class="collapsible-content" style="display: none;">
                            <iframe src="subpages/Article/class2.html" frameborder="0"
                                style="width: 100%; height: 500px; overflow-x: hidden; overflow-y: scroll; scrollbar-width: none; -ms-overflow-style: none;"
                                title="class2"></iframe>
                        </div>
                    </div>

                    <div class="collapsible-section">
                        <h3 class="collapsible-header">⭐校园VPN</h3>
                        <div class="collapsible-content" style="display: none;">
                            <p>为减轻服务器压力，以下文件已做适当删减和压缩<s>（没钱）</s>：</p>
                            <a href="contents/Files/VPN-Windows.pdf">1. Windows电脑</a><br>
                            <a href="contents/Files/安卓、苹果（ios）、MacOS.pdf">2. 安卓、苹果手机、苹果电脑</a>
                        </div>
                    </div>

                    <div class="collapsible-section">
                        <h3 class="collapsible-header">购买校巴（两校区校内直达、天河城-三水校内）</h3>
                        <div class="collapsible-content" style="display: none;">
                            <iframe src="subpages/Article/校巴.md"></iframe>
                        </div>
                    </div>

                    <div class="collapsible-section">
                        <h3 class="collapsible-header">水电网如何购买？办理校园卡后如何加速？</h3>
                        <div class="collapsible-content" style="display: none;">
                            <p>费用详情可以下载查看学校的<a href="https://cw.gdufe.edu.cn/2024/0624/c9539a194362/page.htm" target="_blank">教育收费公示表</a></p>
                            <p>校园网：300元/年 1.5元/小时（加速前1.5MB/s，够用；加速后12MB/s，还是ok的；延迟测过一样）</p>
                            <p>热水费：25元/立方</p>
                            <h1 style="margin-top: 30px;">水电网充值方式：</h1>
                            <p>登录小程序<strong>财大e卡</strong>，点击“卡片充值”，如下图所示：</p>
                            <img src="contents/image/ecard.png" alt="eCard">
                            <p>默认密码是身份证号后6位</p>
                            <p>充值完成后，点击“生活缴费”即可看见水电网缴费。</p>
                            <img src="contents/image/shjf.png" alt="shjf">
                            <p>网费的“我的网络账号”是学号（交钱即开通），水费电费绑定宿舍，热水费的账号是电话号码</p>
                            <h2>注意：</h2>
                            <p>水费是绑定电话号码的，换手机号要去一卡通咨询，不然钱就没了</p>
                            <p>电费如果欠费了没得商量，直接断电...上小程序缴费大概三四分钟后就来电了。<br />不过如果十一点后没电断电了，大家校园卡又没充钱：完蛋</p>
                            <h1>校园网加速</h1>
                            <p>办理了和学校合作的电话卡后，稍等两三天</a></p>
                            <iframe src="subpages/Article/xywjs.md" alt="xyw"></iframe>
                        </div>
                    </div>

                    <div class="collapsible-section">
                        <h3 class="collapsible-header">体测</h3>
                        <div class="collapsible-content" style="display: none;">
                            <center>没人疼？没关系！体测完全身都疼~</center>
                            <iframe src="subpages/Article/tice.md"></iframe>
                        </div>
                    </div>

                    <div class="collapsible-section">
                        <h3 class="collapsible-header">如果有补充的，或信息有误/需要更新，欢迎去<a
                                href="https://github.com/MakiWinster/gdufeHomePage">仓库</a>提Issue或者联系<a
                                href="mailto:Makiiiiiiiho@gmail.com">Makiiiiiiiho@gmail.com</a>！
                    </div>
                </div>



            </div>
        </div>
        <div class="tab-content" id="建议" style="display: none;">
            <h1>提建议、Bug反馈</h1>
            <p>欢迎在<a href="https://github.com/MakiWinster/gdufeHomePage">GitHub</a>提Issue，顺便给我点个Star⭐吧🥰</p>
            <p>也可以把建议发送到<a mailto="Makiiiiiiiho@gmail.com">Makiiiiiiiho@gmail.com</a>噢</p>
            <h1>联系我</h1>
            <!-- <p>个人博客：<a href="https://makis-life.cn" target="_blank">https://makis-life.cn</a></p> -->

            <p>邮箱：<a href="mailto:Makiiiiiiiho@gmail.com">Makiiiiiiiho@gmail.com</a></p>
            <!-- <p>Discord（新频道）：<a href="https://discord.gg/ZQ67K77usH">https://discord.gg/ZQ67K77usH</a></p> -->

            <h2 style="margin-top: 80px; text-align: center;">有帮到你？考虑Donate一下吗~🥰</h2>
            <div style="text-align: center;">
                <button id="showImagesButton"
                    style="margin-top: 10px; padding: 10px 20px; font-size: 16px; border: none; background-color: #4CAF50; color: white; cursor: pointer; border-radius: 5px;">“好，ok，嗯嗯嗯”</button>
            </div>
            <div id="imageContainer" style="display: none; text-align: center; margin-top: 20px;">
                <div class="container2" style="text-align: center;">
                    <div class="item">
                        <img src="contents/image/WeChatPay.png" alt="Wechatpay" class="clickable-img">
                    </div>
                    <div class="item">
                        <img src="contents/image/AliPay.png" magt="AliPay" class="clickable-img">
                    </div>
                </div>
            </div>

            <script>
                document.getElementById('showImagesButton').addEventListener('click', function () {
                    document.getElementById('imageContainer').style.display = 'block';
                });
            </script>

        </div>
    </div>
    </div>



    <script>
        function renderMarkdown(file, iframe) {
            fetch(file)
                .then(response => response.text())
                .then(text => {
                    const container = document.createElement('div');
                    container.className = 'markdown-body';
                    container.innerHTML = marked.parse(text);
                    iframe.replaceWith(container);
                })
                .catch(error => {
                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'markdown-body';
                    errorDiv.innerText = '加载失败：' + error.message;
                    iframe.replaceWith(errorDiv);
                });
        }

        // 获取所有 iframe 元素
        const iframes = document.querySelectorAll('iframe');

        iframes.forEach(iframe => {
            const src = iframe.getAttribute('src');
            if (src && src.endsWith('.md')) {
                // 如果是 Markdown 文件，则渲染
                renderMarkdown(src, iframe);
            }
        });
    </script>
</body>
<footer style="width: 100%; text-align: center; margin-top: 20px;">
    <hr style="border: none; height: 1px; background-color: #ccc;">
    <p style="margin: 10px 0; font-size: 14px;">© Maki Winster 2024</p>
</footer>

<!-- #region-markdown -->
<script>
    function renderMarkdown(file, iframe) {
        fetch(file)
            .then(response => response.text())
            .then(text => {
                const container = document.createElement('div');
                container.className = 'markdown-body';
                container.innerHTML = marked.parse(text);
                iframe.replaceWith(container);
            })
            .catch(error => {
                const errorDiv = document.createElement('div');
                errorDiv.className = 'markdown-body';
                errorDiv.innerText = '加载失败：' + error.message;
                iframe.replaceWith(errorDiv);
            });
    }

    // 获取所有 iframe 元素
    const iframes = document.querySelectorAll('iframe');

    iframes.forEach(iframe => {
        const src = iframe.getAttribute('src');
        if (src && src.endsWith('.md')) {
            // 如果是 Markdown 文件，则渲染
            renderMarkdown(src, iframe);
        }
    });
</script>
<!-- #endregion -->
<!-- #region - 导航栏js -->
<script>
    function openTab(evt, tabId) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tab-content");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tab-link");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(tabId).style.display = "block";
        evt.currentTarget.className += " active";
    }

    // 默认打开常用
    document.addEventListener("DOMContentLoaded", function () {
        var defaultTab = '常用';
        var defaultTabLink = document.querySelector(`a[onclick*="${defaultTab}"]`);
        if (defaultTabLink) {
            openTab({ currentTarget: defaultTabLink }, defaultTab);
        }
    });

    function updateSlideSize(slideSelector, element) {
        var position = element.parent().position();
        var width = element.parent().width();
        var height = element.outerHeight(); // 获取元素高度

        $(slideSelector).css({
            opacity: 1,
            left: +position.left,
            width: width,
            height: height // 动态调整高度
        });
    }

    $("#nav a").on("click", function () {
        updateSlideSize("#nav .slide1", $(this));
    });

    $("#nav a").on("mouseover", function () {
        updateSlideSize("#nav .slide2", $(this));
        $("#nav .slide2").addClass("squeeze");
    });

    $("#nav a").on("mouseout", function () {
        $("#nav .slide2").css({ opacity: 0 }).removeClass("squeeze");
    });

    var initialElement = $("#nav li:nth-of-type(3) a");
    updateSlideSize("#nav .slide1", initialElement);
</script>


<!-- #endregion -->
<!-- #region-可放大照片 -->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        lightGallery(document.querySelector('.container'), {
            selector: '.clickable-img',
            zoom: true,          // 启用缩放功能
            download: false,     // 禁用下载按钮
            controls: false,     // 禁用左右切换按钮
            escKey: true,        // 允许通过Esc键关闭图片
            keyPress: false,     // 禁用键盘左右箭头切换图片
            slideEndAnimation: false,  // 禁用图片切换动画
            enableSwipe: false,  // 禁用触摸滑动切换功能
            enableDrag: false,   // 禁用拖动切换功能
            toolbar: false       // 禁用工具栏
        });
    });




</script>
<!-- #endregion -->
<!-- #region - 搜索栏 -->
<script>
    // 加载的时候聚焦到bing上
    document.addEventListener('DOMContentLoaded', function () {
        document.getElementById('bing-search').focus();
    });
    // Bing搜索功能
    function searchBing() {
        const query = document.getElementById('bing-search').value;
        if (query) {
            window.location.href = `https://www.bing.com/search?q=${encodeURIComponent(query)}`;
        }
    }

    // Baidu搜索功能
    function searchBaidu() {
        const query = document.getElementById('baidu-search').value;
        if (query) {
            window.location.href = `https://www.baidu.com/s?wd=${encodeURIComponent(query)}`;
        }
    }

    // 监听搜索框的Enter键
    function setupEnterKeyListener(id, searchFunction) {
        document.getElementById(id).addEventListener('keyup', function (e) {
            console.log("Key pressed: ", e.key); // 输出按下的键
            if (e.key === 'Enter') {
                e.preventDefault(); // 防止默认行为
                searchFunction();
            }
        });
    }

    setupEnterKeyListener('bing-search', searchBing);
    setupEnterKeyListener('baidu-search', searchBaidu);
</script>
<!-- #endregion -->

</html>